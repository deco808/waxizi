<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>每日运势 | Deco 塔罗</title>
    
    <link href="https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@500;700&family=Montserrat:wght@300;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* --- 1. 全局基础样式和背景 --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background-color: #0c0c10; /* 深色背景 */
            color: #E0E0E0;
            font-family: 'Montserrat', 'Noto Serif SC', sans-serif;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* 背景动画容器 */
        .deco-space { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: -100; pointer-events: none; overflow: hidden; }
        .deco-star { position: absolute; opacity: 0; will-change: transform, opacity; z-index: -2;}
        @keyframes warpSpeed {
            0% { opacity: 0; transform: translateZ(-800px) scale(0.1); }
            20% { opacity: 0.8; } 80% { opacity: 0.8; }
            100% { opacity: 0; transform: translateZ(500px) scale(3); }
        }

        /* 导航栏 */
        header {
            position: fixed; top: 0; left: 0; width: 100%; height: 60px;
            background: rgba(12, 12, 16, 0.95);
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 40px; z-index: 100;
        }
        .logo { font-family: 'ZCOOL KuaiLe', cursive; font-size: 1.4rem; color: #B8A6FF; text-decoration: none; text-shadow: 0 0 10px rgba(184, 166, 255, 0.3); }

        /* --- 2. 布局容器 --- */
        .main-container {
            max-width: 1400px;
            margin: 80px auto 40px;
            padding: 20px;
            min-height: 80vh;
            display: flex;
            flex-direction: column;
        }

        /* --- 3. 游戏桌面 (左右布局) --- */
        #gameBoard {
            display: flex;
            width: 100%;
            height: calc(100vh - 140px);
            gap: 40px;
        }
        
        /* 左侧：抽牌区域 */
        .left-panel {
            flex: 0 0 45%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
        }
        
        /* 右侧：解读区域 */
        .right-panel {
            flex: 0 0 55%;
            display: flex;
            flex-direction: column;
            padding: 40px 20px;
            overflow-y: auto;
        }
        
        /* 抽牌区标题 */
        .draw-title {
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 2.5rem;
            color: #7FFFD4;
            margin-bottom: 30px;
            text-shadow: 0 0 20px rgba(127, 255, 212, 0.3);
            text-align: center;
        }
        
        .draw-subtitle {
            color: #aaa;
            font-size: 1.1rem;
            margin-bottom: 40px;
            text-align: center;
        }
        
        /* 牌堆区域 */
        .deck-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 40px;
        }
        
        /* 牌堆样式 */
        .deck {
            width: 180px; 
            height: 300px; 
            border-radius: 12px; 
            cursor: pointer;
            background-image: url('https://res.cloudinary.com/dbulxrm7b/image/upload/v1764841999/jimeng-2025-12-02-6063-%E5%A1%94%E7%BD%97%E7%89%8C%E8%83%8C%E9%9D%A2%E8%AE%BE%E8%AE%A1_%E5%AF%B9%E7%A7%B0%E7%9A%84%E5%87%A0%E4%BD%95%E5%9B%BE%E6%A1%88_%E4%B8%AD%E5%A4%AE%E6%98%AF%E4%B8%80%E4%B8%AA%E5%A4%8D%E6%9D%82%E7%9A%84%E4%BA%94%E8%A7%92%E6%98%9F%E8%8A%92%E9%98%B5_%E5%91%A8%E5%9B%B4%E7%8E%AF%E7%BB%95%E7%9D%80%E7%B2%BE%E7%BE%8E%E7%9A%84%E8%8A%B1%E7%BA%B9..._uk8i7q.png');
            background-size: cover; 
            background-position: center; 
            transition: all 0.2s;
            box-shadow: -5px 5px 15px rgba(0,0,0,0.5);
            margin-bottom: 20px;
        }
        .deck:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(127, 255, 212, 0.3); }
        .deck-label { color: #888; font-size: 1rem; letter-spacing: 1px; margin-bottom: 40px; }
        
        /* 卡槽样式 */
        .daily-slot {
            width: 180px;
            height: 300px;
            border: 2px dashed rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            margin-top: 20px;
        }
        
        .slot-title {
            position: absolute;
            bottom: -40px;
            font-family: 'ZCOOL KuaiLe';
            color: #B8A6FF;
            font-size: 1.3rem;
            text-align: center;
            width: 100%;
        }
        
        .slot-desc {
            position: absolute;
            bottom: -60px;
            color: #666;
            font-size: 0.9rem;
            width: 100%;
            text-align: center;
        }

        /* --- 4. 卡牌动画与逆位逻辑 --- */
        .tarot-card {
            width: 100%; height: 100%; position: absolute; top: 0; left: 0;
            perspective: 1000px; cursor: pointer; opacity: 0;
            transition: all 0.6s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        .card-inner {
            position: relative; width: 100%; height: 100%; text-align: center;
            transition: transform 0.8s; transform-style: preserve-3d;
        }
        
        /* 翻牌动作 */
        .tarot-card.flipped .card-inner { transform: rotateY(180deg); }

        .card-front, .card-back {
            position: absolute; width: 100%; height: 100%; backface-visibility: hidden;
            -webkit-backface-visibility: hidden; border-radius: 10px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.5);
        }

        .card-back { background-image: inherit; background-size: cover; border: 1px solid #444; }
        .card-front {
            background-color: #000; transform: rotateY(180deg);
            background-size: cover; background-position: center; border: 1px solid #7FFFD4;
        }

        /* 牌面名字样式 */
        .card-name {
            position: absolute; bottom: 5px; width: 100%; text-align: center;
            background: rgba(0,0,0,0.98); color: #fff; font-size: 0.9rem; padding: 5px 0;
            transition: transform 0.8s;
            border-radius: 0 0 8px 8px;
        }

        /* 逆位处理：牌面旋转 180度 */
        .tarot-card.reversed .card-inner .card-front {
            transform: rotateY(180deg) rotateZ(180deg);
        }
        
        /* 逆位文字修正：反向旋转 180度，抵消牌面的旋转，保持文字正直 */
        .tarot-card.reversed .card-inner .card-front .card-name {
            transform: rotateZ(180deg); 
        }

        /* --- 5. 右侧解读区域 --- */
        .reading-title { 
            color: #7FFFD4; 
            font-size: 2rem; 
            margin-bottom: 25px; 
            border-bottom: 1px solid #333; 
            padding-bottom: 10px;
            text-align: left;
            font-family: 'Ma Shan Zheng', cursive;
        }
        
        .reading-content { 
            color: #ccc; 
            line-height: 1.8;
            flex: 1;
        }
        
        .card-info {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        .card-position {
            display: inline-block;
            background: rgba(184, 166, 255, 0.2);
            color: #B8A6FF;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-right: 15px;
            font-weight: bold;
        }
        
        .card-name-large {
            font-size: 1.5rem;
            color: #fff;
            font-weight: bold;
        }
        
        .daily-message {
            background: rgba(127, 255, 212, 0.1);
            border-left: 4px solid #7FFFD4;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
            font-style: italic;
            font-size: 1.1rem;
        }
        
        .reading-section {
            margin-bottom: 30px;
        }
        
        .section-title {
            color: #B8A6FF;
            font-size: 1.2rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-content {
            padding-left: 20px;
            font-size: 1.05rem;
        }
        
        .advice-box {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: 10px;
            margin: 30px 0;
        }
        
        .advice-title {
            color: #7FFFD4;
            font-size: 1.3rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn-restart {
            margin-top: 40px;
            padding: 12px 40px;
            font-size: 1rem;
            background: transparent;
            border: 2px solid #7FFFD4;
            color: #7FFFD4;
            cursor: pointer;
            font-family: 'ZCOOL KuaiLe';
            transition: 0.3s;
            border-radius: 50px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn-restart:hover {
            background: #7FFFD4;
            color: #000;
            box-shadow: 0 0 30px rgba(127, 255, 212, 0.4);
        }
        
        .quote {
            font-style: italic;
            color: #7FFFD4;
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #333;
            font-size: 1.1rem;
        }

        /* 移动端适配 */
        @media (max-width: 992px) {
            #gameBoard {
                flex-direction: column;
                height: auto;
                gap: 20px;
            }
            
            .left-panel, .right-panel {
                flex: none;
                width: 100%;
                padding: 20px;
            }
            
            .right-panel {
                overflow-y: visible;
            }
            
            .draw-title {
                font-size: 2rem;
            }
            
            .daily-slot, .deck {
                width: 160px;
                height: 270px;
            }
        }
        
        @keyframes fadeIn { 
            from { opacity: 0; transform: translateY(20px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        
        .fade-in {
            animation: fadeIn 0.8s ease;
        }
    </style>
</head>
<body>

    <div id="decoSpace" class="deco-space"></div>

    <header>
        <a href="index.html" class="logo">Deco.</a>
        <nav style="color: #fff; font-size: 0.9rem;">
            <i class="fas fa-undo" style="margin-right:5px;"></i> 返回大厅
        </nav>
    </header>

    <div class="main-container">
        
        <!-- 直接显示游戏界面，没有介绍页 -->
        <div id="gameBoard">
            
            <!-- 左侧抽牌区域 -->
            <div class="left-panel">
                <h1 class="draw-title">每日运势</h1>
                <p class="draw-subtitle">Daily Fortune · 抽取你的今日牌卡</p>
                
                <div class="deck-area">
                    <div class="deck" id="mainDeck" onclick="drawCard()"></div>
                    <div class="deck-label" id="deckLabel">点击牌堆抽取今日运势</div>
                </div>
                
                <div class="daily-slot">
                    <div id="slot-0" style="width:100%; height:100%; position:relative;"></div>
                    <div class="slot-title">今日运势牌</div>
                    <div class="slot-desc">Today's Card</div>
                </div>
            </div>
            
            <!-- 右侧解读区域 -->
            <div class="right-panel">
                <div id="readingSection">
                    <h2 class="reading-title"><i class="fas fa-lightbulb"></i> 今日运势解读</h2>
                    
                    <div class="reading-content">
                        <!-- 牌位信息 -->
                        <div class="card-info">
                            <span class="card-position" id="cardPos">待抽取</span>
                            <span class="card-name-large" id="cardName">今日运势牌</span>
                        </div>
                        
                        <!-- 每日消息 -->
                        <div class="daily-message" id="dailyMessage">
                            点击左侧牌堆抽取今日运势牌，塔罗将为你揭示今日的能量状态、机遇与挑战。
                        </div>
                        
                        <!-- 详细解读 -->
                        <div class="reading-section">
                            <h3 class="section-title"><i class="fas fa-sun"></i> 今日主题</h3>
                            <p class="section-content" id="dailyTheme">抽取牌卡后显示今日主题...</p>
                        </div>
                        
                        <div class="reading-section">
                            <h3 class="section-title"><i class="fas fa-bolt"></i> 能量状态</h3>
                            <p class="section-content" id="energyState">抽取牌卡后显示今日能量状态...</p>
                        </div>
                        
                        <div class="reading-section">
                            <h3 class="section-title"><i class="fas fa-gem"></i> 机遇提示</h3>
                            <p class="section-content" id="opportunity">抽取牌卡后显示今日机遇提示...</p>
                        </div>
                        
                        <!-- 建议部分 -->
                        <div class="advice-box">
                            <div class="advice-title"><i class="fas fa-hands-helping"></i> 今日建议</div>
                            <p id="advice">抽取牌卡后显示具体建议...</p>
                        </div>
                        
                        <!-- 重新抽取按钮 -->
                        <div style="text-align: center;">
                            <button class="btn-restart" onclick="resetGame()">
                                <i class="fas fa-sync-alt"></i> 重新抽取
                            </button>
                        </div>
                        
                        <!-- 引用语 -->
                        <div class="quote">
                            "塔罗不是预言命运，而是反映当下的能量状态。你的选择才是创造未来的关键。"
                        </div>
                    </div>
                </div>
            </div>
            
        </div>

    </div>

    <script>
        // --- 1. 数据配置 ---
        const tarotDeck = [
            { id: 0, name: "愚人", url: "card_detail_0.html", img: "https://res.cloudinary.com/dbulxrm7b/image/upload/v1764841999/jimeng-2025-12-01-6534-%E5%8F%82%E8%80%83%E4%B9%8B%E5%89%8D%E7%9A%84%E5%A1%94%E7%BD%97%E7%89%8C%E6%B2%B9%E7%94%BB%E9%A3%8E%E6%A0%BC_%E6%95%B4%E4%B8%AA%E7%94%BB%E9%9D%A2%E9%83%BD%E6%98%AF%E5%8F%A4%E5%85%B8%E6%B2%B9%E7%94%BB%E8%B4%A8%E6%84%9F_%E7%94%BB%E9%9D%A2%E4%B8%AD%E5%A4%AE%E6%98%AF%E4%B8%80%E5%BC%A0%E5%A1%94%E7%BD%97%E7%89%8CThe_..._q2aw6d.png" },
            { id: 1, name: "魔术师", url: "card_detail_1.html", img: "https://res.cloudinary.com/dbulxrm7b/image/upload/v1764842000/%E9%AD%94%E6%9C%AF%E5%B8%88%E5%8D%A1%E7%89%8C_tw8luw.png" },
            { id: 7, name: "战车", url: "card_detail_7.html", img: "https://res.cloudinary.com/dbulxrm7b/image/upload/v1764842008/jimeng-2025-12-01-7127-%E5%8F%82%E8%80%83%E4%B9%8B%E5%89%8D%E7%9A%84%E5%A1%94%E7%BD%97%E7%89%8C%E6%B2%B9%E7%94%BB%E9%A3%8E%E6%A0%BC_%E6%95%B4%E4%B8%AA%E7%94%BB%E9%9D%A2%E9%83%BD%E6%98%AF%E5%8F%A4%E5%85%B8%E6%B2%B9%E7%94%BB%E8%B4%A8%E6%84%9F_%E7%94%BB%E9%9D%A2%E4%B8%AD%E5%A4%AE%E6%98%AF%E4%B8%80%E5%BC%A0%E5%A1%94%E7%BD%97%E7%89%8CThe_..._u0lv2m.png" },
            { id: 8, name: "力量", url: "card_detail_8.html", img: "https://res.cloudinary.com/dbulxrm7b/image/upload/v1764842006/jimeng-2025-12-02-6395-%E5%8F%82%E8%80%83%E5%9B%BE1_%E5%9B%BE2_%E5%9B%BE3_%E5%9B%BE4%E7%9A%84%E5%A1%94%E7%BD%97%E7%89%8C%E9%A3%8E%E6%A0%BC%E5%92%8C%E5%B8%83%E5%B1%80_%E7%94%BB%E9%9D%A2%E4%B8%AD%E5%A4%AE%E6%98%AF%E4%B8%80%E4%BD%8D%E4%BC%98%E9%9B%85%E7%9A%84%E5%8A%9B%E9%87%8F%E5%A5%B3%E7%A5%9E_%E5%A5%B9%E6%9C%89..._dguxvs.png" },
            { id: 9, name: "隐士", url: "card_detail_9.html", img: "https://res.cloudinary.com/dbulxrm7b/image/upload/v1764841998/jimeng-2025-12-02-8446-%E5%8F%82%E8%80%83%E5%9B%BE1_%E5%9B%BE2_%E5%9B%BE3_%E5%9B%BE4%E7%9A%84%E5%A1%94%E7%BD%97%E7%89%8C%E9%A3%8E%E6%A0%BC%E5%92%8C%E5%B8%83%E5%B1%80_%E7%94%9F%E6%88%90%E9%9A%90%E5%A3%AB_The_Hermit_%E5%8D%A1..._vc8yp4.png" },
            { id: 11, name: "正义", url: "card_detail_11.html", img: "https://res.cloudinary.com/dbulxrm7b/image/upload/v1764842000/jimeng-2025-12-02-4963-%E5%8F%82%E8%80%83%E5%9B%BE1%E7%9A%84%E5%A1%94%E7%BD%97%E7%89%8C%E9%A3%8E%E6%A0%BC%E5%92%8C%E5%B8%83%E5%B1%80_%E7%94%9F%E6%88%90%E6%AD%A3%E4%B9%89_Justice_XI_%E5%8D%A1%E7%89%8C_%E7%94%BB%E9%9D%A2%E4%B8%AD%E5%A4%AE%E6%98%AF%E4%B8%80%E4%BD%8D..._wyaqtm.png" },
            { id: 12, name: "倒吊人", url: "card_detail_12.html", img: "https://res.cloudinary.com/dbulxrm7b/image/upload/v1764841998/jimeng-2025-12-02-5942-%E5%8F%82%E8%80%83%E5%9B%BE1%E7%9A%84%E5%A1%94%E7%BD%97%E7%89%8C%E9%A3%8E%E6%A0%BC%E5%92%8C%E5%B8%83%E5%B1%80_%E7%94%9F%E6%88%90%E5%80%92%E5%90%8A%E4%BA%BA_The_Hanged_Man_XII_%E5%8D%A1..._fscaoe.png" },
            { id: 13, name: "死神", url: "card_detail_13.html", img: "https://res.cloudinary.com/dbulxrm7b/image/upload/v1764841995/jimeng-2025-12-02-4279-%E5%8F%82%E8%80%83%E5%9B%BE1%E7%9A%84%E5%A1%94%E7%BD%97%E7%89%8C%E9%A3%8E%E6%A0%BC%E5%92%8C%E5%B8%83%E5%B1%80_%E7%94%BB%E9%9D%A2%E4%B8%AD%E5%A4%AE%E6%98%AF%E4%B8%80%E4%BD%8D%E8%BA%AB%E7%A9%BF%E9%BB%91%E8%89%B2%E7%9B%94%E7%94%B2%E7%9A%84%E6%AD%BB%E7%A5%9E_%E5%A4%B4%E6%88%B4%E7%BA%A2%E8%89%B2%E7%BE%BD%E6%AF%9B%E8%A3%85%E9%A5%B0%E7%9A%84..._dtjouq.png" },
            { id: 14, name: "节制", url: "card_detail_14.html", img: "https://res.cloudinary.com/dbulxrm7b/image/upload/v1764841995/jimeng-2025-12-02-6995-%E5%8F%82%E8%80%83%E5%9B%BE1%E7%9A%84%E5%A1%94%E7%BD%97%E7%89%8C%E9%A3%8E%E6%A0%BC%E5%92%8C%E5%B8%83%E5%B1%80_%E7%94%9F%E6%88%90%E8%8A%82%E5%88%B6_Temperance_XIV_%E5%8D%A1%E7%89%8C_%E7%94%BB%E9%9D%A2%E4%B8%AD..._i1ziz5.png" },
            { id: 15, name: "恶魔", url: "card_detail_15.html", img: "https://res.cloudinary.com/dbulxrm7b/image/upload/v1764841997/jimeng-2025-12-02-8386-%E5%8F%82%E8%80%83%E5%9B%BE1%E7%9A%84%E5%A1%94%E7%BD%97%E7%89%8C%E9%A3%8E%E6%A0%BC%E5%92%8C%E5%B8%83%E5%B1%80_%E7%94%BB%E9%9D%A2%E4%B8%AD%E5%A4%AE%E6%98%AF%E4%B8%80%E4%B8%AA%E7%8B%B0%E7%8B%9E%E7%9A%84%E6%81%B6%E9%AD%94%E5%BD%A2%E8%B1%A1_%E6%9C%89%E7%9D%99%E8%9D%99%E8%9D%A0%E8%88%AC%E7%9A%84%E9%BB%91%E8%89%B2%E7%BF%85%E8%86%80_..._myh1pv.png" },
            { id: 16, name: "高塔", url: "card_detail_16.html", img: "https://res.cloudinary.com/dbulxrm7b/image/upload/v1764841995/jimeng-2025-12-02-8116-%E5%8F%82%E8%80%83%E5%9B%BE1%E7%9A%84%E5%A1%94%E7%BD%97%E7%89%8C%E9%A3%8E%E6%A0%BC%E5%92%8C%E5%B8%83%E5%B1%80_%E7%94%9F%E6%88%90%E9%AB%98%E5%A1%94_The_Tower_XVI_%E5%8D%A1%E7%89%8C_%E7%94%BB%E9%9D%A2%E4%B8%AD%E5%A4%AE..._h4bh4g.png" },
            { id: 17, name: "星星", url: "card_detail_17.html", img: "https://res.cloudinary.com/dbulxrm7b/image/upload/v1764841994/jimeng-2025-12-02-6913-%E5%8F%82%E8%80%83%E5%9B%BE1%E7%9A%84%E5%A1%94%E7%BD%97%E7%89%8C%E9%A3%8E%E6%A0%BC%E5%92%8C%E5%B8%83%E5%B1%80_%E7%94%9F%E6%88%90%E6%98%9F%E6%98%9F%E7%89%8CThe_Star_XVII_%E7%94%BB%E9%9D%A2%E9%87%87%E7%94%A8%E7%9B%B8%E5%90%8C%E7%9A%84..._lfcsjg.png" },
            { id: 18, name: "月亮", url: "card_detail_18.html", img: "https://res.cloudinary.com/dbulxrm7b/image/upload/v1764842024/jimeng-2025-12-02-6328-%E5%8F%82%E8%80%83%E5%9B%BE1%E7%9A%84%E5%A1%94%E7%BD%97%E7%89%8C%E9%A3%8E%E6%A0%BC%E5%92%8C%E5%B8%83%E5%B1%80_%E7%94%9F%E6%88%90%E6%9C%88%E4%BA%AE%E7%89%8CThe_Moon_XVIII_%E7%94%BB%E9%9D%A2%E9%87%87%E7%94%A8%E7%9B%B8%E5%90%8C..._g7mhns.png" },
            { id: 19, name: "太阳", url: "card_detail_19.html", img: "https://res.cloudinary.com/dbulxrm7b/image/upload/v1764842007/jimeng-2025-12-02-6513-%E5%8F%82%E8%80%83%E5%9B%BE1_%E5%9B%BE2_%E5%9B%BE3_%E5%9B%BE4%E7%9A%84%E5%A1%94%E7%BD%97%E7%89%8C%E9%A3%8E%E6%A0%BC%E5%92%8C%E5%B8%83%E5%B1%80_%E7%94%9F%E6%88%90%E5%A4%AA%E9%98%B3%E7%89%8CThe_Sun_XIX_..._ieumwg.png" },
            { id: 20, name: "审判", url: "card_detail_20.html", img: "https://res.cloudinary.com/dbulxrm7b/image/upload/v1764842000/jimeng-2025-12-02-5897-%E5%8F%82%E8%80%83%E5%9B%BE1%E7%9A%84%E5%A1%94%E7%BD%97%E7%89%8C%E9%A3%8E%E6%A0%BC%E5%92%8C%E5%B8%83%E5%B1%80_%E7%94%9F%E6%88%90%E5%AE%A1%E5%88%A4%E7%89%8CJudgement_XX_%E7%94%BB%E9%9D%A2%E9%87%87%E7%94%A8%E7%9B%B8%E5%90%8C%E7%9A%84%E7%99%BD..._czewjq.png" },
            { id: 21, name: "世界", url: "card_detail_21.html", img: "https://res.cloudinary.com/dbulxrm7b/image/upload/v1764841994/jimeng-2025-12-02-6838-%E5%8F%82%E8%80%83%E5%9B%BE1_%E5%9B%BE2_%E5%9B%BE3_%E5%9B%BE4%E7%9A%84%E5%A1%94%E7%BD%97%E7%89%8C%E9%A3%8E%E6%A0%BC%E5%92%8C%E5%B8%83%E5%B1%80_%E7%94%9F%E6%88%90%E4%B8%96%E7%95%8C%E7%89%8CThe_World_XX..._ynbbua.png" }
        ];
        
        // 每日运势解读数据
        const dailyReadings = {
            0: { // 愚人
                upright: {
                    theme: "新的开始与冒险",
                    energy: "充满自由、无畏的精神状态",
                    opportunity: "尝试新事物的好时机，可能会有意外惊喜",
                    advice: "跟随直觉行动，但也要注意脚下，避免不必要的风险"
                },
                reversed: {
                    theme: "谨慎行事",
                    energy: "犹豫不决，缺乏方向感",
                    opportunity: "可能是重新评估计划的好时机",
                    advice: "在行动前做好充分准备，不要贸然前进"
                }
            },
            1: { // 魔术师
                upright: {
                    theme: "创造与行动",
                    energy: "充满创造力与执行力",
                    opportunity: "将想法付诸实践的好机会",
                    advice: "利用现有资源，发挥你的才能，现在正是施展的时候"
                },
                reversed: {
                    theme: "潜能未发挥",
                    energy: "能量受阻，创意难以表达",
                    opportunity: "需要寻找新的方法来解决问题",
                    advice: "重新审视你的计划，可能需要调整方法或策略"
                }
            },
            7: { // 战车
                upright: {
                    theme: "前进与胜利",
                    energy: "充满斗志与决心",
                    opportunity: "克服障碍，取得进展",
                    advice: "保持专注，用意志力推动事情发展"
                },
                reversed: {
                    theme: "方向迷失",
                    energy: "缺乏控制力，进展受阻",
                    opportunity: "重新确立方向",
                    advice: "暂停一下，重新评估你的目标和方向"
                }
            },
            8: { // 力量
                upright: {
                    theme: "内在力量",
                    energy: "温和而坚定的力量",
                    opportunity: "以柔克刚解决问题的时机",
                    advice: "用耐心和勇气面对挑战，内心的力量胜过外在的蛮力"
                },
                reversed: {
                    theme: "力量失控",
                    energy: "焦虑或自我怀疑",
                    opportunity: "学习自我控制的时机",
                    advice: "找回自信，不要让恐惧主导你的行动"
                }
            },
            9: { // 隐士
                upright: {
                    theme: "内省与智慧",
                    energy: "安静、反思的状态",
                    opportunity: "获得内在指引的好时机",
                    advice: "给自己一些独处时间，倾听内心的声音"
                },
                reversed: {
                    theme: "孤独与隔离",
                    energy: "感到孤立或迷茫",
                    opportunity: "寻求他人建议的机会",
                    advice: "不要害怕向他人求助，分享你的想法"
                }
            },
            11: { // 正义
                upright: {
                    theme: "平衡与公正",
                    energy: "理性、客观的状态",
                    opportunity: "公平解决问题的时机",
                    advice: "以公正的态度处理事务，因果终将有报"
                },
                reversed: {
                    theme: "不公与偏见",
                    energy: "感到被不公平对待",
                    opportunity: "纠正错误的机会",
                    advice: "审视自己的立场是否公正，避免偏见影响判断"
                }
            },
            12: { // 倒吊人
                upright: {
                    theme: "牺牲与换位思考",
                    energy: "等待与接受的状态",
                    opportunity: "从不同角度看问题的机会",
                    advice: "有时候暂停和等待能带来新的视角和智慧"
                },
                reversed: {
                    theme: "抗拒与拖延",
                    energy: "抗拒必要的改变",
                    opportunity: "放下固执，接受现实",
                    advice: "接受现状可能是最好的选择，不要无谓抵抗"
                }
            },
            13: { // 死神
                upright: {
                    theme: "结束与重生",
                    energy: "变革与转型的力量",
                    opportunity: "结束旧阶段，开始新生活的时机",
                    advice: "勇敢面对必要的结束，新的开始就在前方"
                },
                reversed: {
                    theme: "抗拒改变",
                    energy: "害怕失去，抗拒变化",
                    opportunity: "学习放手的时机",
                    advice: "有些东西需要放手，才能为新的可能性腾出空间"
                }
            },
            14: { // 节制
                upright: {
                    theme: "平衡与调和",
                    energy: "和谐、有节制的状态",
                    opportunity: "整合不同方面的好时机",
                    advice: "寻找中间道路，平衡对立面"
                },
                reversed: {
                    theme: "失衡与过度",
                    energy: "极端或不协调",
                    opportunity: "恢复平衡的机会",
                    advice: "避免极端行为，寻找适度的生活方式"
                }
            },
            15: { // 恶魔
                upright: {
                    theme: "束缚与欲望",
                    energy: "被物质或欲望牵制",
                    opportunity: "认识到束缚并寻求自由",
                    advice: "审视你的欲望是否控制了你，真正的自由来自内心"
                },
                reversed: {
                    theme: "挣脱束缚",
                    energy: "开始摆脱控制",
                    opportunity: "解放自我的机会",
                    advice: "打破不良习惯或关系，重获自由"
                }
            },
            16: { // 高塔
                upright: {
                    theme: "突然的变化",
                    energy: "剧烈、破坏性的变化",
                    opportunity: "彻底重建的机会",
                    advice: "接受突如其来的变化，它可能带来必要的清理"
                },
                reversed: {
                    theme: "避免灾难",
                    energy: "延迟或减轻的冲击",
                    opportunity: "预防问题的机会",
                    advice: "注意预警信号，及时采取措施避免更大损失"
                }
            },
            17: { // 星星
                upright: {
                    theme: "希望与灵感",
                    energy: "平静、充满希望的状态",
                    opportunity: "实现梦想的好时机",
                    advice: "保持信心，跟随你的灵感，美好的事情正在到来"
                },
                reversed: {
                    theme: "希望渺茫",
                    energy: "失望或理想破灭",
                    opportunity: "重新找到希望的机会",
                    advice: "不要放弃希望，即使在困难时期也要看到光明"
                }
            },
            18: { // 月亮
                upright: {
                    theme: "直觉与潜意识",
                    energy: "困惑、不确定的状态",
                    opportunity: "探索潜意识的时机",
                    advice: "相信你的直觉，但也要分辨现实与幻象"
                },
                reversed: {
                    theme: "逐渐清晰",
                    energy: "迷雾开始散去",
                    opportunity: "看清真相的机会",
                    advice: "隐藏的事情即将浮出水面，保持警觉"
                }
            },
            19: { // 太阳
                upright: {
                    theme: "成功与快乐",
                    energy: "积极、充满活力的状态",
                    opportunity: "成功与认可的好时机",
                    advice: "享受生活的美好，分享你的快乐和热情"
                },
                reversed: {
                    theme: "暂时的阴云",
                    energy: "暂时的挫折或延迟",
                    opportunity: "寻找内在阳光的机会",
                    advice: "困难是暂时的，保持乐观，阳光总会重现"
                }
            },
            20: { // 审判
                upright: {
                    theme: "觉醒与重生",
                    energy: "清晰的判断力",
                    opportunity: "做出重要决定的时机",
                    advice: "倾听内心的召唤，现在是做出改变的时候了"
                },
                reversed: {
                    theme: "自我怀疑",
                    energy: "犹豫不决，缺乏判断",
                    opportunity: "重新评估的机会",
                    advice: "不要匆忙做决定，给自己时间思考和反思"
                }
            },
            21: { // 世界
                upright: {
                    theme: "完成与成功",
                    energy: "圆满、满足的状态",
                    opportunity: "达成目标的好时机",
                    advice: "庆祝你的成就，同时准备开始新的循环"
                },
                reversed: {
                    theme: "未完成的事业",
                    energy: "接近完成但还有缺失",
                    opportunity: "完成最后步骤的机会",
                    advice: "检查还有哪些细节需要完善，争取圆满结束"
                }
            }
        };

        // 补全缺失的主牌
        for(let i = 0; i <= 21; i++){
            if(!tarotDeck.find(c => c.id === i)){
                tarotDeck.push({ id: i, name: `牌 ${i}`, url: `card_detail_${i}.html`, img: "https://via.placeholder.com/140x240?text=Card+Placeholder" });
            }
        }
        tarotDeck.sort((a, b) => a.id - b.id);

        let drawCount = 0; 
        const maxCards = 1; // 只抽一张牌
        let shuffledDeck = []; 
        let currentCard = null;
        let isReversed = false;

        // 页面加载时初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化背景动画
            const space = document.getElementById('decoSpace');
            const fonts = ["'ZCOOL KuaiLe', cursive", "'Ma Shan Zheng', cursive", "'Montserrat', sans-serif"];
            const colors = ['rgba(255, 255, 255, 0.8)', 'rgba(255, 158, 188, 0.7)', 'rgba(127, 255, 212, 0.7)'];

            for (let i = 0; i < 50; i++) {
                const star = document.createElement('div');
                star.classList.add('deco-star');
                star.innerText = 'Deco'; 
                star.style.fontFamily = fonts[Math.floor(Math.random() * fonts.length)];
                star.style.color = colors[Math.floor(Math.random() * colors.length)];
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.fontSize = Math.random() * 0.6 + 0.2 + 'rem';
                const duration = Math.random() * 4 + 3 + 's'; 
                star.style.animation = `warpSpeed ${duration} linear infinite`;
                star.style.animationDelay = `-${Math.random() * 10}s`;
                space.appendChild(star);
            }
            
            // 初始化洗牌
            resetGame();
        });
        
        // 重新抽取逻辑
        function resetGame() {
            // 1. 清除已抽取的牌
            const slot = document.getElementById(`slot-0`);
            slot.innerHTML = '';
            
            // 2. 重置解读区域
            document.getElementById('cardPos').textContent = '待抽取';
            document.getElementById('cardName').textContent = '今日运势牌';
            document.getElementById('dailyMessage').textContent = '点击左侧牌堆抽取今日运势牌，塔罗将为你揭示今日的能量状态、机遇与挑战。';
            document.getElementById('dailyTheme').textContent = '抽取牌卡后显示今日主题...';
            document.getElementById('energyState').textContent = '抽取牌卡后显示今日能量状态...';
            document.getElementById('opportunity').textContent = '抽取牌卡后显示今日机遇提示...';
            document.getElementById('advice').textContent = '抽取牌卡后显示具体建议...';

            // 3. 重置牌堆外观和功能
            const deck = document.getElementById('mainDeck');
            deck.style.opacity = 1;
            deck.style.cursor = "pointer";
            deck.onclick = drawCard;
            
            // 4. 重新洗牌
            let tempDeck = [...tarotDeck]; 
            shuffledDeck = tempDeck.sort(() => Math.random() - 0.5);
            drawCount = 0;
            document.getElementById('deckLabel').innerText = "点击牌堆抽取今日运势";
        }

        // 显示运势解读
        function showDailyReading() {
            const reading = dailyReadings[currentCard.id];
            const readingData = isReversed ? reading.reversed : reading.upright;
            
            // 更新解读区域
            document.getElementById('cardPos').textContent = isReversed ? '逆位' : '正位';
            document.getElementById('cardPos').className = `card-position ${isReversed ? 'reversed' : 'upright'}`;
            document.getElementById('cardName').textContent = currentCard.name;
            document.getElementById('dailyTheme').textContent = readingData.theme;
            document.getElementById('energyState').textContent = readingData.energy;
            document.getElementById('opportunity').textContent = readingData.opportunity;
            document.getElementById('advice').textContent = readingData.advice;
            
            // 每日消息
            let message = "";
            if (isReversed) {
                message = `今日抽到${currentCard.name}的逆位牌。这可能意味着你需要关注某些潜在的挑战或反思当前的方向。`;
            } else {
                message = `今日抽到${currentCard.name}的正位牌。这预示着一个积极的日子，相关能量将在今天显现。`;
            }
            document.getElementById('dailyMessage').textContent = message;
            
            // 添加淡入动画
            const readingSection = document.getElementById('readingSection');
            readingSection.classList.remove('fade-in');
            void readingSection.offsetWidth; // 触发重绘
            readingSection.classList.add('fade-in');
        }

        // 核心抽牌动作
        function drawCard() {
            if (drawCount >= maxCards) return; 

            const currentSlot = document.getElementById(`slot-0`);
            const cardData = shuffledDeck[drawCount];
            isReversed = Math.random() < 0.5; // 50% 概率逆位
            currentCard = cardData;

            // 1. 创建卡牌DOM
            const cardEl = document.createElement('div');
            cardEl.className = 'tarot-card';
            
            if (isReversed) {
                cardEl.classList.add('reversed');
            }

            const innerEl = document.createElement('div');
            innerEl.className = 'card-inner';

            const backEl = document.createElement('div');
            backEl.className = 'card-back';
            
            const frontEl = document.createElement('div');
            frontEl.className = 'card-front';
            frontEl.style.backgroundImage = `url('${cardData.img}')`;
            
            // 牌名标签
            const nameLabel = document.createElement('div');
            nameLabel.className = 'card-name';
            nameLabel.innerText = `${cardData.name} ${isReversed ? '(逆)' : ''}`; 
            frontEl.appendChild(nameLabel);

            innerEl.appendChild(backEl);
            innerEl.appendChild(frontEl);
            cardEl.appendChild(innerEl);
            currentSlot.appendChild(cardEl);

            // 2. 触发卡牌淡入
            requestAnimationFrame(() => {
                cardEl.style.opacity = 1;
            });

            // 3. 自动翻牌 & 绑定跳转
            setTimeout(() => {
                cardEl.classList.add('flipped');
                
                cardEl.onclick = function() {
                    window.location.href = cardData.url;
                };
                
                // 显示运势解读
                showDailyReading();
            }, 600); // 0.6s 后自动翻开

            // 4. 状态更新
            drawCount++;
            const label = document.getElementById('deckLabel');
            
            if (drawCount >= maxCards) {
                label.innerText = "已抽取今日运势";
                const deck = document.getElementById('mainDeck');
                deck.style.opacity = 0.5;
                deck.style.cursor = "default";
                deck.onclick = null;
            } else {
                label.innerText = `抽取今日运势`;
            }
        }
    </script>
</body>
</html>